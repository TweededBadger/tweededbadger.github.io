<html><body>
<div class="postContent-inner"><div class="notesSource"><div class="postField postField--body editable smart-media-plugin" id="editor_96" g_editable="true" role="textbox" contenteditable="true" data-default-value="Title
Tell your story…"><section name="c31e" class="section--first"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="a590" class="graf--h3 graf--first is-selected">Tutorial: Dynamic data-driven SVG map with AngularJS</h3><p name="e1f7" class="graf--p">On a recent AngularJS project I needed to display regional data on an interactive map. I’d already decided on using <a target="_blank" href="http://en.wikipedia.org/wiki/Scalable_Vector_Graphics" data-href="http://en.wikipedia.org/wiki/Scalable_Vector_Graphics" class="markup--anchor markup--p-anchor" data-tooltip="http://en.wikipedia.org/wiki/Scalable_Vector_Graphics" data-tooltip-position="bottom" data-tooltip-type="link">SVG</a> as it’s great for displaying vector based assets such as maps. Keeping the integrity of the SVG file format was also important. After allot of searching I couldn't find an approach which I was happy with for the project that didn't require converting the SVG file into JavaScript or use another library such as Rapheal or d3.</p><p name="8809" class="graf--p">You can view an example of my approach <a target="_blank" href="http://tweededbadger.github.io/examples/svg_maps/" data-href="http://tweededbadger.github.io/examples/svg_maps/" class="markup--anchor markup--p-anchor" data-tooltip="http://tweededbadger.github.io/examples/svg_maps/" data-tooltip-position="bottom" data-tooltip-type="link">here</a>.</p><p name="76d1" class="graf--p"><em class="markup--em markup--p-em">This tutorial assumes you:</em></p><ul class="postList"><li name="3048" class="graf--li"><em class="markup--em markup--li-em">Can run a site from a local HTTP server</em></li><li name="4a10" class="graf--li"><em class="markup--em markup--li-em">know HTML, JavaScript &amp; CSS</em></li><li name="215d" class="graf--li graf--last"><em class="markup--em markup--li-em">have a basic knowledge of AngularJS</em></li></ul></div></div></section><section name="0aca"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="a345" class="graf--h3 graf--first">Let’s find a map!</h3><p name="8312" class="graf--p"><a target="_blank" href="http://commons.wikimedia.org/" data-href="http://commons.wikimedia.org/" class="markup--anchor markup--p-anchor" data-tooltip="http://commons.wikimedia.org/" data-tooltip-position="bottom" data-tooltip-type="link">Wikimedia Commons</a> is a great place to find SVG maps, but don’t forget to adhere to the licence of the map that you intend to use. <a target="_blank" href="http://commons.wikimedia.org/wiki/File:Blank_US_Map.svg" data-href="http://commons.wikimedia.org/wiki/File:Blank_US_Map.svg" class="markup--anchor markup--p-anchor" data-tooltip="http://commons.wikimedia.org/wiki/File:Blank_US_Map.svg" data-tooltip-position="bottom" data-tooltip-type="link">This map</a> of the US states will do the job for this tutorial. Now we have our map it’s time to prepare it to work with. Open the file up in a text editor such as Notepad++:</p><figure tabindex="0" contenteditable="false" name="3316" class="graf--figure is-defaultValue"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 424px;"><div class="aspect-ratio-fill" style="padding-bottom: 60.5%;"></div><img class="graf-image" data-image-id="1*WAtYAIKCGhbhS9Fvl1H5bQ.png" data-width="1383" data-height="837" src="https://d262ilb51hltx0.cloudfront.net/max/800/1*WAtYAIKCGhbhS9Fvl1H5bQ.png"></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for image (optional)"><span class="defaultValue">Type caption for image (optional)</span><br></figcaption></figure><p name="933b" class="graf--p">First let’s remove the styling from the file, this is because we want to control the style of the map via external CSS and dynamically with AngularJS. To do this delete everything within the &lt;style&gt;&lt;/style&gt; tag at the top, then search the file to see if there’s any other styling as attributes on elements within the rest of the file.&nbsp;</p><blockquote name="8606" class="graf--blockquote">Tip: You can easily get rid of all the in-line styles within the SVG file by using Replace with Regular Expressions. For example in Notepad++ go to Search &gt; Replace, select “Regular Expression” and put</blockquote><blockquote name="0931" class="graf--blockquote"><strong class="markup--strong markup--blockquote-strong">style=”.*”</strong></blockquote><blockquote name="85ac" class="graf--blockquote">in the “Find what:” box. Make sure there’s nothing in “Replace with”, click “Replace All” and Voila! all the styles are gone.</blockquote><p name="5bcb" class="graf--p">Next we want to make sure that the map will scale correctly when embedded. To do this edit the following tag:</p><pre name="3a30" class="graf--pre">&lt;svg xmlns="<a target="_blank" href="http://www.w3.org/2000/svg" data-href="http://www.w3.org/2000/svg" class="markup--anchor markup--pre-anchor" rel="nofollow">http://www.w3.org/2000/svg</a>" version="1.1" width="959" height="593"&gt;</pre><p name="f138" class="graf--p">Add an attribute called “viewbox” using the width &amp; height, then change the width &amp; height attributes to 100%:</p><pre name="e527" class="graf--pre">&lt;svg xmlns="<a target="_blank" href="http://www.w3.org/2000/svg" data-href="http://www.w3.org/2000/svg" class="markup--anchor markup--pre-anchor" rel="nofollow">http://www.w3.org/2000/svg</a>" version="1.1" width="100%" height="100%" viewbox="0 0 959 593"&gt;</pre><p name="f9a6" class="graf--p graf--last">We’ll need to be able reference the sections of the map in 2 ways: by class to reference them as a whole, and by ID in order to reference them individually. Luckily in this case the map has a class for each region called “state” and an ID for each region using 2 letter US state abbreviations.</p></div></div></section><section name="5309"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="1302" class="graf--h3 graf--first">Project Prep</h3><p name="d8e9" class="graf--p">We’re going to use Bootstrap for styling so go ahead and download it from <a target="_blank" href="http://getbootstrap.com/" data-href="http://getbootstrap.com/" class="markup--anchor markup--p-anchor" rel="nofollow">http://getbootstrap.com/</a>. Then download AngularJS from <a target="_blank" href="https://angularjs.org/" data-href="https://angularjs.org/" class="markup--anchor markup--p-anchor" rel="nofollow">https://angularjs.org/</a>. Create a new folder for your project and copy Bootstrap and Angular into it. Create some blank files as highlighted so your folder structure looks something like this:</p><figure tabindex="0" contenteditable="false" name="8bbd" class="graf--figure is-defaultValue"><div class="aspectRatioPlaceholder is-locked" style="max-width: 381px; max-height: 731px;"><div class="aspect-ratio-fill" style="padding-bottom: 191.9%;"></div><img class="graf-image" data-image-id="1*Bk6T6tHGboJQLCCorGrbAg.png" data-width="381" data-height="731" src="https://d262ilb51hltx0.cloudfront.net/max/800/1*Bk6T6tHGboJQLCCorGrbAg.png"></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for image (optional)"><span class="defaultValue">Type caption for image (optional)</span><br></figcaption></figure><p name="a14d" class="graf--p">Now set-up our base index.html:</p><figure tabindex="0" contenteditable="false" name="3b3f" class="graf--figure graf--iframe graf--last"><div class="iframeContainer"><iframe width="700" height="250" src="/media/60b54230fd3ff2127afcd35bae2d38cd?maxWidth=700" data-media-id="60b54230fd3ff2127afcd35bae2d38cd" frameborder="0" style="height: 369px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/d38466c88b446d4b691e" data-href="https://gist.github.com/TweededBadger/d38466c88b446d4b691e" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/d38466c88b446d4b691e</a></figcaption></figure></div></div></section><section name="1cb0"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="cfb2" class="graf--h3 graf--first">Loading the map</h3><p name="c67b" class="graf--p">Let’s get our map loaded up. Create the AngularJS app and controller in controllers.js:</p><figure tabindex="0" contenteditable="false" name="6c52" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/eabaf24f2dc944203bed1ff246335da3?maxWidth=700" data-media-id="eabaf24f2dc944203bed1ff246335da3" frameborder="0" style="height: 113px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/3dfb8ec7b06c927862b3" data-href="https://gist.github.com/TweededBadger/3dfb8ec7b06c927862b3" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/3dfb8ec7b06c927862b3</a></figcaption></figure><p name="6efa" class="graf--p">Then create a directive to load up our map as a template and add a tag for it within the “container” div:</p><figure tabindex="0" contenteditable="false" name="0013" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/bf037523e981cd934863b75173fca8c0?maxWidth=700" data-media-id="bf037523e981cd934863b75173fca8c0" frameborder="0" style="height: 322px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/ccdaac3e53aee9c0637d" data-href="https://gist.github.com/TweededBadger/ccdaac3e53aee9c0637d" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/ccdaac3e53aee9c0637d</a></figcaption></figure><p name="cbcc" class="graf--p"><em class="markup--em markup--p-em">The great thing about using the SVG file as a template is that it makes it very easy to edit your map in an application such as </em><a target="_blank" href="http://www.inkscape.org/" data-href="http://www.inkscape.org/" class="markup--anchor markup--p-anchor" data-tooltip="http://www.inkscape.org/" data-tooltip-position="bottom" data-tooltip-type="link"><em class="markup--em markup--p-em">Inkscape</em></a><em class="markup--em markup--p-em"> on the fly. Want to delete bits of your map? Just load it up, edit and save!</em></p><p name="c52a" class="graf--p">Now load up index.html from your local server, you should see a big black map of the US of A.</p><figure tabindex="0" contenteditable="false" name="d5f9" class="graf--figure is-defaultValue"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 455px;"><div class="aspect-ratio-fill" style="padding-bottom: 65%;"></div><img class="graf-image" data-image-id="1*oOOBLkxhuzfQkmd2DielZA.png" data-width="1332" data-height="866" src="https://d262ilb51hltx0.cloudfront.net/max/800/1*oOOBLkxhuzfQkmd2DielZA.png"></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for image (optional)"><span class="defaultValue">Type caption for image (optional)</span><br></figcaption></figure><p name="5fd2" class="graf--p">Let’s add some styles to main.css to make it a bit prettier and add some hover interaction:</p><figure tabindex="0" contenteditable="false" name="2b73" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/11b1ebe07425ea10ca8aa56e6e44fab0?maxWidth=700" data-media-id="11b1ebe07425ea10ca8aa56e6e44fab0" frameborder="0" style="height: 257px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/98dc9a003f5bee9733a4" data-href="https://gist.github.com/TweededBadger/98dc9a003f5bee9733a4" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/98dc9a003f5bee9733a4</a></figcaption></figure><p name="8863" class="graf--p graf--last">You should now have a grey map with regions that darken on hover.</p></div></div></section><section name="452d"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="f4be" class="graf--h3 graf--first">Data, dummy!</h3><p name="a6d0" class="graf--p">In the real world away from tutorial land, we’d be loading our data for the map from some external service with Angular. For this tutorial though we’ll write a function to create the dummy data to be displayed on the map.</p><p name="290e" class="graf--p">Here’s the function to go in the main controller and some html to view the values plus a button to create new data (and some styles).</p><figure tabindex="0" contenteditable="false" name="5770" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/e7ea8d801525e51e3b54ac44f09566cf?maxWidth=700" data-media-id="e7ea8d801525e51e3b54ac44f09566cf" frameborder="0" style="height: 933px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/17a6f13a787578a69fc5" data-href="https://gist.github.com/TweededBadger/17a6f13a787578a69fc5" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/17a6f13a787578a69fc5</a></figcaption></figure><p name="bf1b" class="graf--p">Reload and you should see list of the states with the random data values:</p><figure tabindex="0" contenteditable="false" name="32b6" class="graf--figure is-defaultValue"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 463px;"><div class="aspect-ratio-fill" style="padding-bottom: 66.10000000000001%;"></div><img class="graf-image" data-image-id="1*hj7n8bKFG49lKKRipWO3ig.png" data-width="1240" data-height="820" src="https://d262ilb51hltx0.cloudfront.net/max/800/1*hj7n8bKFG49lKKRipWO3ig.png"></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for image (optional)"><span class="defaultValue">Type caption for image (optional)</span><br></figcaption></figure><p name="b77f" class="graf--p graf--last">Click the button and the random values should change before your very eyes!</p></div></div></section><section name="3aa3"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="ce42" class="graf--h3 graf--first">Let’s Angularize this map..</h3><p name="decc" class="graf--p">In order to get the map to react to the data, the sections of the map need to be integrated into Angular somehow. We can do this with a directive for each region:</p><figure tabindex="0" contenteditable="false" name="7590" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/5307312f743776ec697abfd97d144510?maxWidth=700" data-media-id="5307312f743776ec697abfd97d144510" frameborder="0" style="height: 273px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/ae0efe18fdab666a922a" data-href="https://gist.github.com/TweededBadger/ae0efe18fdab666a922a" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/ae0efe18fdab666a922a</a></figcaption></figure><p name="3b1c" class="graf--p">Now we could reference the directive in the SVG:</p><pre name="6213" class="graf--pre">&lt;path region ng-click=”regionClick()” d=”m 380.03242,320.96457 4.90324,-86.32496 -113.38856,-12.64396 -12.21382,87.93916 120.69914,11.02976 z” id=”CO” class=”state” /&gt;</pre><p name="2a4b" class="graf--p">This sucks though for 2 reasons: Firstly it adds non standard mark-up to our SVG file and secondly and even more importantly it’s bloody tedious!&nbsp;</p><p name="b51d" class="graf--p">Instead let’s inject the directive into the DOM with Angular. <a target="_blank" href="https://docs.angularjs.org/api/ng/service/$compile" data-href="https://docs.angularjs.org/api/ng/service/$compile" class="markup--anchor markup--p-anchor" data-tooltip="https://docs.angularjs.org/api/ng/service/$compile" data-tooltip-position="bottom" data-tooltip-type="link">$compile</a> to the rescue!&nbsp;</p><p name="1930" class="graf--p">Edit our directives thus:</p><figure tabindex="0" contenteditable="false" name="b6c7" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/67cdfa72daa7fb7a1619adeb51c10ea9?maxWidth=700" data-media-id="67cdfa72daa7fb7a1619adeb51c10ea9" frameborder="0" style="height: 529px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/5a9deec961399e91e714" data-href="https://gist.github.com/TweededBadger/5a9deec961399e91e714" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/5a9deec961399e91e714</a></figcaption></figure><p name="7496" class="graf--p">Now when you click on a region you should be alerted to its id. We’re getting somewhere now! Let’s look at what’s going on here in a bit more detail. First the “svgMap” directive:</p><pre name="a4d1" class="graf--pre">var regions = element[0].querySelectorAll(‘.state’);</pre><p name="280c" class="graf--p">Create an array containing all elements of class “state” using <a target="_blank" href="https://developer.mozilla.org/en/docs/Web/API/Document.querySelectorAll" data-href="https://developer.mozilla.org/en/docs/Web/API/Document.querySelectorAll" class="markup--anchor markup--p-anchor" data-tooltip="https://developer.mozilla.org/en/docs/Web/API/Document.querySelectorAll" data-tooltip-position="bottom" data-tooltip-type="link">querySelectorAll</a>.</p><p name="f683" class="graf--p graf--empty"><br></p><pre name="11bf" class="graf--pre">angular.forEach(regions, function (region, key) {<br>    //...<br>})</pre><p name="a2e7" class="graf--p">Loop through the regions array.</p><p name="b4b4" class="graf--p graf--empty"><br></p><pre name="ccfb" class="graf--pre">var regionElement = angular.element(region);</pre><p name="ab84" class="graf--p">Wrap the region DOM element as an Angular <a target="_blank" href="https://docs.angularjs.org/api/ng/function/angular.element" data-href="https://docs.angularjs.org/api/ng/function/angular.element" class="markup--anchor markup--p-anchor" data-tooltip="https://docs.angularjs.org/api/ng/function/angular.element" data-tooltip-position="bottom" data-tooltip-type="link">jqLite element</a>.</p><p name="9a49" class="graf--p graf--empty"><br></p><pre name="5491" class="graf--pre">regionElement.attr(“region”, “”);</pre><p name="f006" class="graf--p">Add the “region” attribute to the DOM element so it can be tied to the directive of the same name.</p><p name="e70b" class="graf--p graf--empty"><br></p><pre name="774f" class="graf--pre">$compile(regionElement)(scope);</pre><p name="ea0a" class="graf--p"><a target="_blank" href="https://docs.angularjs.org/api/ng/service/$compile" data-href="https://docs.angularjs.org/api/ng/service/$compile" class="markup--anchor markup--p-anchor" data-tooltip="https://docs.angularjs.org/api/ng/service/$compile" data-tooltip-position="bottom" data-tooltip-type="link">Compile</a> the element so Angular can do it’s magic.</p><p name="3e3a" class="graf--p graf--empty"><br></p><p name="4386" class="graf--p">Now the <em class="markup--em markup--p-em">region</em> directive:</p><pre name="6c34" class="graf--pre">element.attr(“ng-click”, “regionClick()”);</pre><p name="032d" class="graf--p">Add the <em class="markup--em markup--p-em">ng-click</em> attribute to the region element in order to run the <em class="markup--em markup--p-em">regionClick</em> function, you guessed it, when we click the region.</p><p name="c32f" class="graf--p graf--empty"><br></p><pre name="1764" class="graf--pre">element.removeAttr(“region”);</pre><p name="abf8" class="graf--p">In order for the <em class="markup--em markup--p-em">ng-click </em>attribute to take effect we’ll need to compile the element again. However if we do this, Angular will read the <em class="markup--em markup--p-em">region</em> attribrite, reattach the directive again, and consequently the universe will explode.&nbsp;</p><p name="927f" class="graf--p">Luckily interstellar catastrophe can be avoided if we remove the <em class="markup--em markup--p-em">region </em>attribute from the element. Phew!</p><p name="e066" class="graf--p graf--empty"><br></p><pre name="0635" class="graf--pre">$compile(element)(scope);</pre><p name="5c9d" class="graf--p">More Angular magic, you know the drill by now.</p><p name="61ff" class="graf--p graf--empty"><br></p><p name="0363" class="graf--p graf--last">So our map regions are now augmented with the mighty power of Angular. Onward!</p></div></div></section><section name="fe2b"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="9efb" class="graf--h3 graf--first">Mapping in the data</h3><p name="c3a8" class="graf--p">If we want our map regions to tie up the <em class="markup--em markup--p-em">dummyData </em>object, we’ll need to give each of the regions access to the data via its scope:</p><figure tabindex="0" contenteditable="false" name="ff63" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/63bde37cfe1507487e17da516d386891?maxWidth=700" data-media-id="63bde37cfe1507487e17da516d386891" frameborder="0" style="height: 577px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/383f73171d29da6b5964" data-href="https://gist.github.com/TweededBadger/383f73171d29da6b5964" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/383f73171d29da6b5964</a></figcaption></figure><p name="f774" class="graf--p">Now when you click on a region it will hopefully alert to you the corresponding value for that region. Hardly a huge leap forward I know but don’t worry we’ll get to the pretty stuff in a minute.</p><blockquote name="bd42" class="graf--blockquote"><strong class="markup--strong markup--blockquote-strong">A note:</strong> I'm not going to go into great detail about the sometimes confusing world of Angular directive scopes. However if you’re having trouble I shall point you in the direction of this great blog post on the subject: <a target="_blank" href="http://www.undefinednull.com/2014/02/11/mastering-the-scope-of-a-directive-in-angularjs/" data-href="http://www.undefinednull.com/2014/02/11/mastering-the-scope-of-a-directive-in-angularjs/" class="markup--anchor markup--blockquote-anchor" rel="nofollow">http://www.undefinednull.com/2014/02/11/mastering-the-scope-of-a-directive-in-angularjs/</a></blockquote><p name="6964" class="graf--p">Here’s the new bits:</p><pre name="b30e" class="graf--pre">regionElement.attr(“dummy-data”, “dummyData”);</pre><p name="5a75" class="graf--p">Set the <em class="markup--em markup--p-em">dummyData</em> attribute on the region element so we can tie it into the region directive scope.</p><p name="02e0" class="graf--p graf--empty"><br></p><pre name="aedf" class="graf--pre">scope<strong class="markup--strong markup--pre-strong">: </strong>{<br>  dummyData<strong class="markup--strong markup--pre-strong">: “</strong>=”<br>},</pre><p name="c490" class="graf--p">Create a two-way binding with the <em class="markup--em markup--p-em">dummyData </em>object.</p><p name="54f8" class="graf--p graf--empty"><br></p><pre name="b46c" class="graf--pre">scope.regionClick <strong class="markup--strong markup--pre-strong">= </strong>function ()<strong class="markup--strong markup--pre-strong"> </strong>{<br>  alert(scope.dummyData[scope.elementId].value);<br>};</pre><p name="4d35" class="graf--p graf--last">Use the id of the SVG element to access the corresponding data value.</p></div></div></section><section name="1fee"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="0dc3" class="graf--h3 graf--first">Pretty Colours</h3><p name="9319" class="graf--p">Time to bring our data to life with pretty colours! The easiest way to do this is with a <a target="_blank" href="https://docs.angularjs.org/guide/filter" data-href="https://docs.angularjs.org/guide/filter" class="markup--anchor markup--p-anchor" data-tooltip="https://docs.angularjs.org/guide/filter" data-tooltip-position="bottom" data-tooltip-type="link">custom Angular filter</a>.</p><figure tabindex="0" contenteditable="false" name="6893" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/9ea666815b16e93f9e92ab96dd793e06?maxWidth=700" data-media-id="9ea666815b16e93f9e92ab96dd793e06" frameborder="0" style="height: 161px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/91f8d660b7d1898ccc39" data-href="https://gist.github.com/TweededBadger/91f8d660b7d1898ccc39" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/91f8d660b7d1898ccc39</a></figcaption></figure><p name="9432" class="graf--p">This filter is quick &amp; ugly but it does the job for the purposes of this tutorial. It will take our data value and convert it in a rgba string that we can use as a fill with the SVG region.</p><p name="65a5" class="graf--p">Add the following to the <em class="markup--em markup--p-em">region </em>directive:</p><figure tabindex="0" contenteditable="false" name="70c7" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/eca987eff9c8a3ac3b2bfeeef0c1322c?maxWidth=700" data-media-id="eca987eff9c8a3ac3b2bfeeef0c1322c" frameborder="0" style="height: 161px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/cf4d60becb94978ee04a" data-href="https://gist.github.com/TweededBadger/cf4d60becb94978ee04a" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/cf4d60becb94978ee04a</a></figcaption></figure><p name="bde0" class="graf--p">Reload again and bask in the majesty of our colourful map!</p><figure tabindex="0" contenteditable="false" name="d64c" class="graf--figure is-defaultValue"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 547px;"><div class="aspect-ratio-fill" style="padding-bottom: 78.2%;"></div><img class="graf-image" data-image-id="1*_7IsUjEddB80rD0hDYBS4Q.png" data-width="1262" data-height="987" src="https://d262ilb51hltx0.cloudfront.net/max/800/1*_7IsUjEddB80rD0hDYBS4Q.png"></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for image (optional)"><span class="defaultValue">Type caption for image (optional)</span><br></figcaption></figure><p name="af4e" class="graf--p graf--last">Click away on the button to see the colours of the map regions change in response.</p></div></div></section><section name="ab38"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="b86c" class="graf--h3 graf--first">Tying things up</h3><p name="758d" class="graf--p">To add some extra usability, lets’s highlight the specific region in the table when you hover over the map and vice versa.</p><p name="10ac" class="graf--p">Make the following edits and additions:</p><figure tabindex="0" contenteditable="false" name="d52a" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/b59c09625a0176a808872e2ad41e9b41?maxWidth=700" data-media-id="b59c09625a0176a808872e2ad41e9b41" frameborder="0" style="height: 1044px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)">N<a target="_blank" href="https://gist.github.com/TweededBadger/d5069823501761936d6a" data-href="https://gist.github.com/TweededBadger/d5069823501761936d6a" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/d5069823501761936d6a</a></figcaption></figure><p name="24b1" class="graf--p">Now when you hover over a region on the map the corresponding data should be highlighted in the table. What is happening here is that when you hover over a region we are setting the <em class="markup--em markup--p-em">hoverRegion</em> variable within the main controller scope. Subsequently the <em class="markup--em markup--p-em">active</em> class is set on the corresponding region div.</p><p name="a8c2" class="graf--p">To make this work the other way around add the following:</p><figure tabindex="0" contenteditable="false" name="e91d" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/ee42bcfc21aa3ee21d236ddab796782a?maxWidth=700" data-media-id="ee42bcfc21aa3ee21d236ddab796782a" frameborder="0" style="height: 692px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/c2cce0b36adc8e986e8f" data-href="https://gist.github.com/TweededBadger/c2cce0b36adc8e986e8f" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/c2cce0b36adc8e986e8f</a></figcaption></figure><p name="a0cb" class="graf--p graf--last">The <em class="markup--em markup--p-em">hoverRegion </em>variable is now changed when you hover over the divs in the table and the map regions will behave as if being hovered over.</p></div></div></section><section name="b28d"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="fd29" class="graf--h3 graf--first">Scaling new heights</h3><p name="f47d" class="graf--p">The colours on the map don’t mean much at the moment. Let’s create a scale to add some context using the custom filter we created earlier.</p><figure tabindex="0" contenteditable="false" name="1163" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/334c2601ac305796f79a5fc09c392b04?maxWidth=700" data-media-id="334c2601ac305796f79a5fc09c392b04" frameborder="0" style="height: 450px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/95ae3e62699c62e7e536" data-href="https://gist.github.com/TweededBadger/95ae3e62699c62e7e536" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/95ae3e62699c62e7e536</a></figcaption></figure><p name="5ceb" class="graf--p">Your scale should look like this:</p><figure tabindex="0" contenteditable="false" name="410d" class="graf--figure is-defaultValue graf--last"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 431px;"><div class="aspect-ratio-fill" style="padding-bottom: 61.6%;"></div><img class="graf-image" data-image-id="1*LSkyTAiG7W5H4ci5W8zDnA.png" data-width="1166" data-height="718" src="https://d262ilb51hltx0.cloudfront.net/max/800/1*LSkyTAiG7W5H4ci5W8zDnA.png"></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for image (optional)"><span class="defaultValue">Type caption for image (optional)</span><br></figcaption></figure></div></div></section><section name="5a1a" class="section--last"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="d603" class="graf--h3 graf--first">Tidy tidy tidy</h3><p name="c783" class="graf--p">The current layout looks a bit rubbish, so let’s take advantage of some Bootstrap styles by adding some extra divs. Edit the index.html:</p><figure tabindex="0" contenteditable="false" name="66cc" class="graf--figure graf--iframe"><div class="iframeContainer"><iframe width="700" height="250" src="/media/bdb677ddb7f088a94b9478d16050de2d?maxWidth=700" data-media-id="bdb677ddb7f088a94b9478d16050de2d" frameborder="0" style="height: 866px;"></iframe></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for embed (optional)"><a target="_blank" href="https://gist.github.com/TweededBadger/e0926b599b049585ceff" data-href="https://gist.github.com/TweededBadger/e0926b599b049585ceff" class="markup--anchor markup--figure-anchor" rel="nofollow">https://gist.github.com/TweededBadger/e0926b599b049585ceff</a></figcaption></figure><p name="eaf2" class="graf--p">This puts the map and data into 2 columns and adds a few panels.</p><p name="da92" class="graf--p graf--last">And there you have it, a data driven SVG map using AngularJS.</p></div></div></section></div><div class="inlineTooltip2 button-scalableGroup"><button class="button button--small button--circle button--neutral button--inlineTooltipControl" data-action="inline-menu" title="Add an image, video, embed, or new part"><span class="icon icon--addMediaPlus"></span></button><div class="inlineTooltip2-menu"><button class="button button--small button--circle button--neutral button--scale u-transitionSeries" data-action="inline-menu-image" title="Add an image"><span class="icon icon--addMediaImage"></span></button><button class="button button--small button--circle button--neutral button--scale u-transitionSeries" data-action="inline-menu-embed" data-action-value="Paste a YouTube, Vine, Vimeo, or other video link, and press Enter" title="Add a video"><span class="icon icon--addMediaVideo"></span></button><button class="button button--small button--circle button--neutral button--scale u-transitionSeries" data-action="inline-menu-embed" data-action-value="Paste a link to embed content from another site (e.g. Twitter) and press Enter" title="Add an embed"><span class="icon icon--addMediaEmbed"></span></button><button class="button button--small button--circle button--neutral button--scale u-transitionSeries" data-action="inline-menu-hr" title="Add a new part"><span class="icon icon--addMediaPart"></span></button></div></div></div><div class="postFollowUps supplementalPostContent layoutSingleColumn"><div class="followUps followUps--empty" data-action-scope="_actionscope_11"><h4 class="cards-heading followUps-title">Further reading</h4><div class="followUps-list"></div></div></div></div>
</body></html>